# S3

프로젝트 이름으로 bucket을 생성합니다.
일반적으로 아래 규칙으로 생성됩니다.
추후 public 데이터로 전환될 수 있기 때문에 DNS 형태로 생성합니다.

```
projectname.lazypic.org
```

프로젝트명이 circle이라면 circle.lazypic.org가 프로젝트 버킷이 됩니다.

## 버킷 생성
서울리전에 lazypic 프로파일을 이용해서 버킷을 생성하는 방법

```bash
$ aws s3 create-bucket --bucket bucketname --region ap-northeast-2 --profile lazypic
```

## 파일복사 : 로컬 -> AWS S3

현재경로에 file.ext 파일을 S3로 올리는 방법

```bash
$ aws s3 cp file.ext s3://lazypic/file.ext
```

## 파일복사 : AWS S3 -> 로컬
클라우드에 있는 file.ext를 로컬로 다운로드 하는 방법

```bash
$ aws s3 cp s3://lazypic/file.ext file.ext
```

## 폴더 만들기
lazypic 버킷에 project 폴더를 생성하기. 끝에 꼭 '/'문자를 붙혀야 한다.

```bash
$ aws s3api put-object --bucket lazypic --key project/
```

## 로그정책
circle.lazypic.org 버킷에 파일이 생성되면, log.lazypic.org 버킷에 circle 폴더 내부에 로그가 생성되는 방법을 설명하겠습니다.

circle.lazypic.org 버킷으로 이동합니다.

Properties > Sever access logging 옵션을 활성화합니다.

값은 아래처럼 설정해줍니다.
- Target bucket : log.lazypic.org
- Target prefix : circle/

log.lazypic.org 버킷으로 이동해서 로그가 잘 생성되는지 체크합니다.

log.lazypic.org 버킷 설정에서 Managemnet > Liftcycle 항목으로 이동 후 12개월 후 log가 삭제되도록 추가 설정을 진행합니다.
